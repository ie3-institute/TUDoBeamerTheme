%:%%%%%%%%%%%%%%%%%%%----------------------------------------%%%%%%%%%%%%%%%%%%%%
%-------------------   LaTeX-Beamer-Theme der TU Dortmund   -------------------%
%%%%%%%%%%%%%%%%%%%%----------------------------------------%%%%%%%%%%%%%%%%%%%%

%% Erstellt von Maximilian NÃ¶the <maximilian.noethe@tu-dortmund.de>
% Version 2.0 vom 18.2.2016
% \ProvidesPackage{tudo}[2016/02/18]

%Requirements
\RequirePackage{xcolor}
\RequirePackage{ifluatex}
\RequirePackage{ifxetex}
\RequirePackage{calc}
\RequirePackage{tikz}
\hypersetup{colorlinks=true, linkcolor=darkgray, urlcolor=tudark}


\mode<presentation>
\newif\if@showtotalframes\@showtotalframesfalse
\DeclareOption{showtotalframes}{\@showtotalframestrue}
\ProcessOptions

\setbeamersize{text margin left=15pt, text margin right=15pt}

%Settings
\usefonttheme{professionalfonts}
\ifluatex%
  \RequirePackage{fontspec}
  \setsansfont{FiraSans Light}[
    BoldFont=FiraSans Medium,
    BoldItalicFont=FiraSans Medium Italic,
    ItalicFont=FiraSans Light Italic,
  ]
\else
  \ifxetex
    \RequirePackage{fontspec}
    \setsansfont{FiraSans-Light.otf}[
      BoldFont=FiraSans-Medium.otf,
      BoldItalicFont=FiraSans-MediumItalic.otf,
      ItalicFont=FiraSans-LightItalic.otf,
    ]
  \else
  \RequirePackage[light]{FiraSans}
  \fi
\fi


\setbeamertemplate{navigation symbols}{}


%% headline

\newlength{\headerheight}
\setlength{\headerheight}{0.08\paperheight}
\setbeamertemplate{headline}
{%
  \vspace*{10pt}%
  \leavevmode
  \begin{beamercolorbox}[
    wd=0.35\paperwidth,
    ht=\headerheight,
    leftskip=\beamer@leftmargin,
    rightskip=1em,
  ]{headline}%
    \includegraphics[height=\headerheight]{logos/tu.pdf}%
  \end{beamercolorbox}%
  \begin{beamercolorbox}[
    wd=0.65\paperwidth,
    ht=\headerheight,
    leftskip=1em,
    rightskip=\beamer@rightmargin,
  ]{headline}%
  \usebeamerfont{institute in head/foot}\hfill\insertshortinstitute[respectlinebreaks]
  \end{beamercolorbox}%
  \vskip2ex%
  \textcolor{tugreen}{\rule{\paperwidth}{0.4pt}}%  
  \vskip2ex
}

\setbeamertemplate{footline}
{%
  \leavevmode
  \begin{beamercolorbox}[
    wd=0.3\paperwidth,
    ht=4ex,
    dp=10pt,
    leftskip=\beamer@leftmargin,
  ]{author in head/foot}%
    {\usebeamerfont{author in head/foot}\insertshortauthor~\textbar~}%
    {\usebeamerfont{date in head/foot}\insertshortdate}%
  \end{beamercolorbox}%
  \begin{beamercolorbox}[
    wd=0.5\paperwidth,
    ht=3ex,
    dp=10pt,
    center,
  ]{section in head/foot}%
    \ifx\insertsection\empty%
    \else%
      \usebeamerfont{section in head/foot}\insertsection%
      \ifx\insertsubsection\empty
      \else%
        :~\usebeamerfont{subsection in head/foot}\insertsubsection%
      \fi
    \fi%
  \end{beamercolorbox}%
  \ifnum\insertframenumber=1%
  \else%
    \begin{beamercolorbox}[
      wd=0.2\paperwidth,
      ht=4ex,
      dp=10pt,
      rightskip=\beamer@rightmargin,
    ]{frame}%
      \hfill{\usebeamerfont{framenumber}\usebeamercolor[fg]{framenumber}\insertframenumber%
      \if@showtotalframes
        ~/~\inserttotalframenumber%
      \fi}%
    \end{beamercolorbox}%
  \fi%
}

% \def\maketitle{\ifbeamer@inframe\titlepage\else\frame[plain]{\titlepage}\fi}
% \def\titlepage{\usebeamertemplate{title page}}
\setbeamertemplate{title page}
{
  %\begin{minipage}[b][\paperheight]{\textwidth}
  \ifx\inserttitle\empty%
  \else%
  \begin{beamercolorbox}[center, wd=\textwidth, dp=1ex]{title}
    \usebeamerfont{title}\inserttitle\\[-0.5\baselineskip]%
  \end{beamercolorbox}%
  \vspace*{\fill}
  \fi%
  \def\titlebulletsize{\textwidth/8}% Size of the bullets in the title
  \def\titlecornerradius{\textwidth/68}% Radius for the bullet corners
  \def\titlebulletspacing{\textwidth/48}% Space inbetween bullets
  \begin{tikzpicture}[overlay, remember picture, shift={(current page.south west)}, xshift=\beamer@leftmargin, yshift=4ex+10pt]
    \begin{scope}
      \clip [rounded corners=\titlecornerradius] (0,0) rectangle coordinate (centerpoint) (\titlebulletsize,\titlebulletsize); 
      \node [rectangle, inner sep=0pt, minimum size=\titlebulletsize] at (centerpoint) {\includegraphics[width=\titlebulletsize]{images/tudo-title-1.jpg}};
    \end{scope}
    \begin{scope}[xshift=\titlebulletsize + \titlebulletspacing]
      \clip [rounded corners=\titlecornerradius] (0,0) rectangle coordinate (centerpoint) (\titlebulletsize,\titlebulletsize);
      \node [rectangle, fill=tugreen, inner sep=0pt, minimum size=\titlebulletsize] at (centerpoint) {};
    \end{scope}
    \begin{scope}[xshift=2*(\titlebulletsize + \titlebulletspacing)]
      \clip [rounded corners=\titlecornerradius] (0,0) rectangle coordinate (centerpoint) (\titlebulletsize,\titlebulletsize);
      \node [rectangle, inner sep=0pt, minimum size=\titlebulletsize] at (centerpoint) {\includegraphics[width=\titlebulletsize]{images/tudo-title-2.jpg}};
    \end{scope}
    \begin{scope}[xshift=3*(\titlebulletsize + \titlebulletspacing)]
      \clip [rounded corners=\titlecornerradius] (0,0) rectangle coordinate (centerpoint) (\titlebulletsize,\titlebulletsize);
      \node [rectangle, fill=black!30, inner sep=0pt, minimum size=\titlebulletsize] at (centerpoint) {};
    \end{scope}
    \begin{scope}[xshift=4*(\titlebulletsize + \titlebulletspacing)]
      \clip [rounded corners=\titlecornerradius] (0,0) rectangle coordinate (centerpoint) (\titlebulletsize,\titlebulletsize); 
      \node [rectangle, inner sep=0pt, minimum size=\titlebulletsize] at (centerpoint) {\includegraphics[width=\titlebulletsize]{images/tudo-title-3.jpg}};
    \end{scope}
    \begin{scope}[xshift=5*(\titlebulletsize + \titlebulletspacing)]
      \clip [rounded corners=\titlecornerradius] (0,0) rectangle coordinate (centerpoint) (\titlebulletsize,\titlebulletsize);
      \node [rectangle, fill=black!11, inner sep=0pt, minimum size=\titlebulletsize] at (centerpoint) {};
    \end{scope}
    \begin{scope}[xshift=6*(\titlebulletsize + \titlebulletspacing)]
      \clip [rounded corners=\titlecornerradius] (0,0) rectangle coordinate (centerpoint) (\titlebulletsize,\titlebulletsize); 
      \node [rectangle, inner sep=0pt, minimum size=\titlebulletsize] at (centerpoint) {\includegraphics[width=\titlebulletsize]{images/tudo-title-4.jpg}};
    \end{scope}
  \end{tikzpicture}%
}

\setbeamertemplate{itemize items}[square]

\setbeamertemplate{frametitle}{%
  \usebeamerfont{frametitle}\insertframetitle%
}


%% fonts
\setbeamerfont{author}{size=\Large}
\setbeamerfont{title}{size=\huge, series=\bfseries}
\setbeamerfont{date}{size=\large, series=\bfseries}

\setbeamerfont{frametitle}{size=\large, series=\bfseries}
\setbeamerfont{framenumber}{size=\small, series=\bfseries}

\setbeamerfont{institute}{size=\large}
\setbeamerfont{section in head/foot}{size=\small}
\setbeamerfont{subsection in head/foot}{size=\small}
\setbeamerfont{institute in head/foot}{size=\large}


\setbeamerfont{item}{series=\bfseries}
\setbeamerfont{itemize/enumerate body}{size=\normalfont}
\setbeamerfont{itemize/enumerate subbody}{size=\normalfont}
\setbeamerfont{itemize/enumerate subsubbody}{size=\normalfont}

\setbeamerfont{block title}{series=\bfseries}
\setbeamerfont{section in toc}{series=\bfseries}

\setbeamerfont{author in head/foot}{size=\small}
\setbeamerfont{date in head/foot}{size=\small}


%% colors
\xdefinecolor{tugreen}{RGB}{132, 184, 24}       % 0
\colorlet{tulight}{tugreen!20!white}
\colorlet{tudark}{tugreen!60!black}

\xdefinecolor{tuorange}{RGB}{227, 105, 19}      % 3
\xdefinecolor{tuyellow}{RGB}{242, 189, 0}       % 4
\xdefinecolor{tucitron}{RGB}{249, 219, 0}       % 5

\setbeamercolor{section in head/foot}{fg=tugreen, bg=white}
\setbeamercolor{framenumber}{fg=tugreen, bg=white}

\setbeamercolor{normal text}{fg=darkgray, bg=white}
\setbeamercolor{alerted text}{fg=tuorange, bg=white}
\setbeamercolor{palette primary}{fg=darkgray, bg=white}
\setbeamercolor{palette secondary}{fg=tugreen, bg=white}

\setbeamercolor{title}{fg=darkgray, bg=white}
\setbeamercolor{structure}{fg=tugreen, bg=white}

\setbeamercolor{frametitle}{fg=tugreen, bg=white}

\setbeamercolor{item}{fg=tugreen, bg=white}

\setbeamercolor{block title}{fg=white, bg=tugreen}
\setbeamercolor{block body}{fg=darkgray, bg=tulight}

\setbeamercolor{section number in toc}{fg=tugreen, bg=white}
\setbeamercolor{section in toc}{fg=darkgray, bg=white}

\mode<all>
